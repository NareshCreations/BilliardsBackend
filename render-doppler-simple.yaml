services:
  - type: web
    name: billiards-backend-doppler
    env: node
    plan: free
    buildCommand: npm install && npm run build
    startCommand: doppler run -- npm run migrate && doppler run -- npm start
    envVars:
      - key: DOPPLER_TOKEN
        value: ${DOPPLER_TOKEN}
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3001

databases:
  - name: billiards-db
    plan: free
    databaseName: billiards_platform
    user: billiards_user
  
  - name: redis-db
    plan: free
    engine: REDIS
